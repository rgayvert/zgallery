var T=Object.defineProperty;var P=(o,t,e)=>t in o?T(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e;var l=(o,t,e)=>(P(o,typeof t!="symbol"?t+"":t,e),e);import{l as b,P as r,a as i,p as u,b as s,f as h,M as S,g as A,c6 as g,B,c7 as v,C,c8 as m,c9 as d,ag as D,j as $,x as L,H as R,bd as q,L as G,Z as H,G as I}from"./index-CKN91vmA.js";function z(o,t){return r(o%t,Math.floor(o/t))}class M{constructor(t,e,n){l(this,"home");l(this,"location");this.n=t,this.index=e,this.initialIndex=n,this.home=z(e,t),this.location=i(z(n,t))}title(){return this.isBlank()?"":this.index.toString()}get current(){return this.location.get()}get x(){return this.current.x}get y(){return this.current.y}isBlank(){return this.index===this.n*this.n-1}isHome(){return this.home.equals(this.current)}onSameRowAs(t){return this.current.y===t.current.y}inSameColumnAs(t){return this.current.x===t.current.x}moveRight(){this.location.set(r(this.x+1,this.y))}moveLeft(){this.location.set(r(this.x-1,this.y))}moveDown(){this.location.set(r(this.x,this.y+1))}moveUp(){this.location.set(r(this.x,this.y-1))}}class x{constructor(t){l(this,"tiles");l(this,"blank");const e=b.randomSequence(0,t*t);this.tiles=Array(t*t);for(let n=0;n<t*t;n++)this.tiles[n]=new M(t,n,e[n]);this.blank=this.tiles[t*t-1]}tileAt(t){return this.tiles.find(e=>e.current.equals(t))}tileClicked(t){this.tileIsActive(t)&&this.moveTile(t)}tileIsActive(t){return t.onSameRowAs(this.blank)||t.inSameColumnAs(this.blank)}moveTile(t){const e=t.current;t.onSameRowAs(this.blank)?t.x<this.blank.x?this.pushRight(t):this.pushLeft(t):t.y<this.blank.y?this.pushDown(t):this.pushUp(t),this.blank.location.set(e)}pushLeft(t){for(let e=this.blank.x+1;e<=t.x;e++)this.tileAt(r(e,t.y)).moveLeft()}pushRight(t){for(let e=this.blank.x-1;e>=t.x;e--)this.tileAt(r(e,t.y)).moveRight()}pushUp(t){for(let e=this.blank.y+1;e<=t.y;e++)this.tileAt(r(t.x,e)).moveUp()}pushDown(t){for(let e=this.blank.y-1;e>=t.y;e--)this.tileAt(r(t.x,e)).moveDown()}}function O(o,t,e){return A({label:o.title(),rounding:s.rounding.r0,color:s.color.background.contrast,background:i(()=>o.isBlank()?s.color.transparent:o.isHome()?s.color.green:s.color.secondaryContainer),gridArea:i(()=>`${o.y+1} / ${o.x+1}`),fontSize:i(()=>g(.3/e)),model:o,action:()=>t.tileClicked(o),ripple:!1,componentName:"Square"})}function N(o){const t=new x(o),e={nrows:o,ncolumns:o,gap:u(2),background:s.color.blue,width:h(95),aspectRatio:1,marginTop:s.space.s7,border:s.border.medium.color(s.color.blue),componentName:"TilePuzzle"};return S(e).append(...t.tiles.map(n=>O(n,t,o)))}function U(o,t,e){const a=v(`(100% - ((${e} + 1) * 3px)) / ${e}`);return C(o.title(),{position:"absolute",left:i(()=>m(d(a,o.x),u((o.x+1)*3))),top:i(()=>m(d(a,o.y),u((o.y+1)*3))),background:i(()=>o.isBlank()?s.color.transparent:o.isHome()?s.color.green:s.color.secondaryContainer),fontSize:i(()=>g(.3/e)),width:a,height:a,rounding:s.rounding.r0,color:s.color.background.contrast,clickAction:()=>t.tileClicked(o),transition:o.isBlank()?"":"all 0.3s",model:o,componentName:"Square"})}function W(o){const t=new x(o),e={background:s.color.blue,width:h(95),aspectRatio:1,marginTop:s.space.s7,componentName:"TilePuzzle"};return B(e).append(...t.tiles.map(n=>U(n,t,o)))}function _(o){const[t,e]=o.split("-"),n=parseInt(t);return e==="Box"?W(n):N(n)}function j(){const o=b.sequence(3,4).map(c=>`${c} x ${c}`),t=i(""),e=["Box","Grid"],n=i(""),a=i(()=>`${t.get()}-${n.get()}`),f={font:s.font.title_medium,padding:s.space.s2,rounding:s.rounding.pill},k={font:s.font.title_medium};function p(c,y,w){return G(c,k).append(H(y,w,f))}return D().append($({width:h(100),alignItems:"center"}).append(L(s.space.s4),R({gap:s.space.s6}).append(p("Size:",t,o),p("Type:",n,e)),q(a,c=>_(c))))}function Z(){return I(E)}const E={sourceDir:"/source/Demos/TilePuzzle",sections:[{title:"Tile Puzzle",componentFn:j,sources:["TilePuzzleModel.ts","BoxTilePuzzle.ts","GridTilePuzzle.ts","TilePuzzleGame.ts"],markdown:"TilePuzzle.md"}]};export{Z as TilePuzzle,Z as default};
