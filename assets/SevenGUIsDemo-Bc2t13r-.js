var I=Object.defineProperty;var x=(t,e,r)=>e in t?I(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var n=(t,e,r)=>(x(t,typeof e!="symbol"?e+"":e,r),r);import{aR as R,q as G,a as i,ao as T,H as h,c as s,l as y,e as g,h as m,k as w,L as S,b9 as W,bu as F,U as O,V as C,$ as L,T as $,m as f,aq as M,a7 as V,a6 as U,f as b,bv as Y,bw as E,af as j,p as A,aj as P,aP as _,bx as q,by as H,B as z,bz as X,G as J}from"./index-Dgn6dljM.js";import{t as K}from"./TimerAtom-4whC2XmH.js";class N{constructor(){n(this,"undoStack",R([]));n(this,"redoStack",R([]));n(this,"group")}describe(e){return`${Array.isArray(e)?e.map(a=>a.description).toString():e.description||""} undo=${this.undoStack.length} redo=${this.redoStack.length}`}performWithUndo(e,r,a){e();const l={forward:e,reverse:r,description:a};this.group?this.group.push(l):(this.undoStack.push(l),this.redoStack.clear())}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}undoGroup(e){[...e].reverse().forEach(r=>r.reverse())}redoGroup(e){[...e].forEach(r=>r.forward())}undo(){const e=this.undoStack.pop();e&&(Array.isArray(e)?this.undoGroup(e):e.reverse(),this.redoStack.push(e))}redo(){const e=this.redoStack.pop();e&&(Array.isArray(e)?this.redoGroup(e):e.forward(),this.undoStack.push(e))}beginGroup(){this.group=[]}endGroup(){this.group&&(this.undoStack.push(this.group),this.group=void 0)}}class Q{constructor(){n(this,"counter",G(0));n(this,"count",i(()=>this.counter.get().toString()))}}function Z(){const t=new Q;return T().append(h({gap:s.space.s5}).append(y(t.count,{minWidth:g(3),border:s.border.thin,color:s.color.primary,font:s.font.body_large,padding:s.space.s2}),m({label:"Count",action:()=>t.counter.increment()})))}class ee{constructor(){n(this,"temperature",i(0));n(this,"celsius",i(0));n(this,"fahrenheit",i(32));this.celsius.addAction(e=>this.temperature.set(e)),this.fahrenheit.addAction(e=>this.temperature.set((e-32)*5/9)),this.temperature.addAction(e=>{this.celsius.set(w.roundTo(e,2)),this.fahrenheit.set(w.roundTo(e*9/5+32,2))})}}function te(){const t=new ee;function e(r,a){return S(r,{side:"right"}).append(W(a,{border:s.border.thin,decimalPlaces:2,width:g(4)}))}return h({gap:s.space.s5}).append(e("Celcius",t.celsius),y(" = "),e("Fahrenheit",t.fahrenheit))}class re{constructor(){n(this,"booking",i(""));n(this,"direction",i("one-way flight",{action:()=>this.booking.set("")}));n(this,"startDate",i(new Date));n(this,"returnDate",i(new Date))}isOneWay(){return this.direction.get()==="one-way flight"}parseDateString(e){return F("DD.MM.YYYY")(e)}formatDate(e){return O("DD.MM.YYYY","utc")(e)}bookFlight(){const e=this.startDate.get(),r=this.returnDate.get(),a=e&&this.formatDate(e),l=r&&this.formatDate(r);this.booking.set(this.isOneWay()?`Leaving: ${a}`:`Leaving: ${a}<br>Returning: ${l}`)}datesAreValid(){const e=this.startDate.get(),r=this.returnDate.get();return!!(this.isOneWay()?e:e&&r&&e<r)}}const se=["one-way flight","return flight"];function oe(){const t=new re;function e(a,l){const d=i(t.formatDate(a.get()||new Date));d.addAction(o=>{a.set(t.parseDateString(o)),t.booking.set("")});const c=i(!0);return M(d,{border:s.border.thin,width:g(8),textAlign:"center",disabled:l,color:i(()=>l.get()?s.color.gray:s.color.primary),valid:c,background:i(()=>c.get()?s.color.background:s.color.pink),pattern:/^\d\d\.\d\d\.\d\d\d\d$/.source})}const r={name:"FlightBooker",border:s.border.thin,justifyContent:"center",padding:s.space.s6,gap:s.space.s5,model:t};return h({gap:s.space.s6}).append(C(r).append(L(t.direction,se),e(t.startDate,i(!1)),e(t.returnDate,i(()=>t.isOneWay())),m({label:"Book",action:()=>t.bookFlight(),width:g(8),disabled:i(()=>!t.datesAreValid()),background:s.color.primaryContainer})),$(t.booking,{font:s.font.body_medium,minWidth:f(20)}))}class ne{constructor(){n(this,"elapsedTime",i(0,{action:e=>this.elapsedTimeChanged(e)}));n(this,"timer",K(e=>this.elapsedTime.set(e/1e3),.1));n(this,"duration",i(10,{action:e=>this.durationChanged(e)}));n(this,"percent",i(()=>100*this.elapsedTime.get()/this.duration.get()));n(this,"elapsedLabel",i(()=>`${w.printRoundedTo(this.elapsedTime.get(),1)}s`))}elapsedTimeChanged(e){e>=this.duration.get()&&this.timer.pause()}durationChanged(e){this.elapsedTime.get()<this.duration.get()&&this.timer.resume()}reset(){this.timer.restart()}}function ie(){const t=new ne,e={minVal:0,maxVal:20,width:f(20),radiusRatio:20},r={border:s.border.thin,justifyContent:"center",margin:s.space.s6,padding:s.space.s6,gap:s.space.s5};return T().append(C(r).append(S("Elapsed Time:").append(V(t.percent)),y(t.elapsedLabel),S("Duration: ").append(U(t.duration,e)),h({gap:s.space.s5,width:b(100)}).append(m({label:"Start",action:()=>t.reset(),width:b(40)}),m({label:"Reset",action:()=>t.reset(),width:b(40)}))))}class ae{constructor(){n(this,"initialRecords",[{last:"Mustermann",first:"Max"},{last:"Tisch",first:"Roman"},{last:"Emil",first:"Hans"}]);n(this,"filter",i(""));n(this,"allRecords",R(this.initialRecords));n(this,"filteredRecords",i(()=>this.allRecords.filter(e=>e.last.toLowerCase().startsWith(this.filter.get().toLowerCase())).sort((e,r)=>this.formatRecord(e).localeCompare(this.formatRecord(r))),{action:()=>this.listChanged()}));n(this,"selectedRecord",i(void 0,{action:e=>this.recordSelected(e)}));n(this,"first",i(""));n(this,"last",i(""))}clearSelectedRecord(){this.selectedRecord.set(void 0),this.first.set(""),this.last.set("")}listChanged(){const e=this.selectedRecord.get();e&&!this.filteredRecords.get().includes(e)&&this.clearSelectedRecord()}formatRecord(e){return`${e.last}, ${e.first}`}recordSelected(e){e&&(this.first.set(e.first),this.last.set(e.last))}readyToCreate(){return!!(this.first.get()&&this.last.get())}readyToUpdate(){return!!this.selectedRecord.get()}readyToDelete(){return!!this.selectedRecord.get()}createRecord(){const e={first:this.first.get(),last:this.last.get()};this.allRecords.push(e),this.selectedRecord.set(e)}updateRecord(){const e={first:this.first.get(),last:this.last.get()};this.deleteRecord(),this.allRecords.push(e)}deleteRecord(){const e=this.selectedRecord.get();e&&this.allRecords.delete(e),this.clearSelectedRecord()}}function de(){const t=new ae;function e(d,c){return S(d).append(M(c,{border:s.border.thin,width:f(15),textAlign:"start"}))}function r(d,c,o){return m({label:d,action:c,width:f(10),disabled:o,background:s.color.primaryContainer})}const a={border:s.border.thin,justifyContent:"center",padding:s.space.s6,gap:s.space.s8,model:t},l={width:b(100),height:g(10),padding:s.space.s1};return C(a).append(h({gap:s.space.s7}).append(C({gap:s.space.s5}).append(e("Filter prefix:",t.filter),Y(t.filteredRecords,t.selectedRecord,d=>t.formatRecord(d),l)),E([["Name:",e("",t.first)],["Surname:",e("",t.last)]])),h({gap:s.space.s5,justifyContent:"center"}).append(r("Create",()=>t.createRecord(),i(()=>!t.readyToCreate())),r("Update",()=>t.updateRecord(),i(()=>!t.readyToUpdate())),r("Delete",()=>t.deleteRecord(),i(()=>!t.readyToDelete()))))}const k=class k{constructor(){n(this,"undoManager",new N);n(this,"circles",R([]));n(this,"initialRadius",25);n(this,"selectedID",i("",{action:()=>{var e;return this.selectedRadius.set(((e=this.selectedCircle)==null?void 0:e.r.get())||this.initialRadius)}}));n(this,"selectedRadius",i(this.initialRadius,{action:e=>this.changeSelectedRadiusWithUndo(this.selectedID.get(),e)}))}nextID(){return(k._nextID++).toString()}get selectedCircle(){return this.circles.find(e=>e.id===this.selectedID.get())}circleWithID(e){return this.circles.find(r=>r.id===e)}addCircleAt(e,r,a){this.circles.push({id:a,x:e,y:r,r:i(this.initialRadius)}),this.selectedID.set(a)}addCircleWithUndo(e,r){const a=this.nextID();this.undoManager.performWithUndo(()=>this.addCircleAt(e,r,a),()=>this.removeCircle(a),`AddCircle(${e}, ${r})`)}removeCircle(e){const r=this.circleWithID(e);r&&(this.circles.delete(r),r.id===this.selectedID.get()&&this.clearSelection())}changeSelectedRadiusWithUndo(e,r){const a=this.circleWithID(e);if(a){const l=a.r.get();this.undoManager.performWithUndo(()=>this.changeRadius(e,r),()=>this.changeRadius(e,l),`ChangeRadius(${l} => ${r})`)}}changeRadius(e,r){var a;(a=this.circleWithID(e))==null||a.r.set(r)}hasSelection(){return!!this.selectedID.get()}clearSelection(){this.selectedID.set("")}canUndo(){return this.undoManager.canUndo()}canRedo(){return this.undoManager.canRedo()}undo(){this.undoManager.undo()}redo(){this.undoManager.redo()}beginUndoGroup(){this.undoManager.beginGroup()}endUndoGroup(){this.undoManager.endGroup()}};n(k,"_nextID",1);let v=k;function ce(){const t=new v;function e(o){return _({id:o.id,cx:o.x,cy:o.y,r:o.r,stroke:s.color.black,strokeWidth:1,fill:i(()=>t.selectedID.get()===o.id?s.color.gray:s.color.background),clickAction:u=>a(u,o.id)})}function r(o){if(o.target instanceof Element){const u=o.target.getBoundingClientRect();t.addCircleWithUndo(o.clientX-u.left,o.clientY-u.top)}}function a(o,u){o.stopPropagation(),t.selectedID.set(u)}const l={width:g(8),minVal:5,maxVal:50,radiusRatio:20,disabled:i(()=>!t.hasSelection()),onDragStart:()=>t.beginUndoGroup(),onDragEnd:()=>t.endUndoGroup()},d={width:f(10),background:s.color.primaryContainer},c=[{label:"Undo",action:()=>t.undo(),disabled:i(()=>!t.canUndo())},{label:"Redo",action:()=>t.redo(),disabled:i(()=>!t.canRedo())}];return C({gap:s.space.s4,justifyContent:"center"}).append(h({width:b(100),gap:s.space.s5,justifyContent:"center"}).append(...c.map(o=>m({...o,...d})),S("Radius:").append(U(t.selectedRadius,l))),T({padding:s.space.s4,border:s.border.thin}).append(j({width:A(400),height:A(400),clickAction:o=>r(o)}).append(P(t.circles,o=>o.id,o=>e(o)))))}function le(t){const e=w.sequence(0,7).map(l=>t.map(d=>""));e[1][0]="23",e[2][0]="10",e[1][1]="14",e[3][3]="=A1+B1",e[4][3]="=A1-B1",e[3][4]="=A1*A2",e[5][5]="=A1";const r=t.map((l,d)=>q({title:l,value:c=>c[d],setter:(c,o)=>c[d]=o})),a=H(e,r);return a.updateAllOnChange=!0,a}class ue{constructor(){n(this,"cols",[..."ABCDEF"]);n(this,"tableModel7");n(this,"rows");n(this,"columns");this.tableModel7=le(this.cols),this.rows=this.tableModel7.rows,this.columns=this.tableModel7.columns}}function he(){const t=new ue;t.columns.forEach(d=>{const c=d.formatter;d.formatter=o=>l(c(o))});const e={editable:!0,dataCellViewOptions:{minWidth:f(7)}};function r(d,c,o){var p;const u=d.groups;if(u&&u[c]&&u[o]){const D=t.cols.indexOf(u[c]),B=parseInt(u[o]);return((p=(t.rows.at(B)||[])[D])==null?void 0:p.toString())||""}else return""}function a(d){const c=/(?<col1>[A-G])(?<row1>[0-9])(?<op>[+\-*])(?<col2>[A-G])(?<row2>[0-9])/.exec(d);if(c){const u=parseInt(r(c,"col1","row1")),p=parseInt(r(c,"col2","row2")),D=c.groups.op;return(D==="+"?u+p:D==="-"?u-p:u*p).toString()}const o=/(?<col1>[A-G])(?<row1>[0-9])/.exec(d);return o?r(o,"col1","row1"):"!!"}function l(d){return d.startsWith("=")?a(d.slice(1)):d}return z({border:s.border.thin}).append(X(t.tableModel7,e))}function Se(){return J(pe)}const pe={sourceDir:"/source/Demos/SevenGUIs",sections:[{title:"1. Counter",componentFn:Z,sources:["SevenCounter.ts"],markdown:"SevenCounter.md"},{title:"2. Temperature Converter",componentFn:te,sources:["SevenTempConverterModel.ts","SevenTempConverter.ts"],markdown:"SevenTempConverter.md"},{title:"3. Flight Booker",componentFn:oe,sources:["SevenFlightBookerModel.ts","SevenFlightBooker.ts"],markdown:"SevenFlightBooker.md"},{title:"4. Timer",componentFn:ie,sources:["SevenTimerModel.ts","SevenTimer.ts"],markdown:"SevenTimer.md"},{title:"5. CRUD",componentFn:de,sources:["SevenCRUDModel.ts","SevenCRUD.ts"],markdown:"SevenCRUD.md"},{title:"6. Circle Draw",componentFn:ce,sources:["SevenCircleDrawModel.ts","SevenCircleDraw.ts"],markdown:"SevenCircleDraw.md"},{title:"7. Cells",componentFn:he,sources:["SevenCells.ts"],markdown:"SevenCells.md"}]};export{Se as SevenGUIsDemo,Se as default};
