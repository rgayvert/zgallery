var h=Object.defineProperty;var p=(s,e,n)=>e in s?h(s,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[e]=n;var r=(s,e,n)=>(p(s,typeof e!="symbol"?e+"":e,n),n);import{l as d,a as c,a7 as T,c4 as v,j as u,f as y,b as t,k as m,H as f,M as L,ah as b,e as q,m as w,af as k,c5 as C,g as x,G as O}from"./index-aIMxXOu_.js";class G{constructor(){r(this,"player1","X");r(this,"player2","O");r(this,"squareValues",d.sequence(0,9).map(e=>c("")));r(this,"moveList",T.instance.addAtom("moveList",[],e=>this.moveListChanged(e)));r(this,"winner",c(()=>this.getWinner()));r(this,"nextPlayer",c(()=>this.getNextPlayer()));r(this,"status",c(()=>this.getStatus()))}squareIsDisabled(e){return!!(this.getWinner()||this.squareValues[e].get())}moveListChanged(e){this.squareValues.forEach((n,l)=>{const a=e.indexOf(l);n.set(a===-1?"":this.playerOnMove(a))})}playerOnMove(e){return e%2==0?this.player1:this.player2}getNextPlayer(){return this.winner.get()?void 0:this.playerOnMove(this.moveList.get().length)}getStatus(){const e=this.winner.get();return e?`Winner: ${e}`:this.gameOver()?"Draw":`${v("Next player:")} ${this.getNextPlayer()}`}gameOver(){return!!this.winner.get()||this.moveList.get().length===9}squareClicked(e){this.squareValues[e].set(this.getNextPlayer()||""),this.moveList.set([...this.moveList.get(),e])}goToMove(e){this.moveList.set(this.moveList.get().slice(0,e))}newGame(){this.moveList.set([])}getWinner(){const e=this.moveList.get(),n=d.sequence(0,9).map((a,i)=>{const o=e.indexOf(i);return o===-1?void 0:o%2===0?this.player1:this.player2}),l=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];for(let a=0;a<l.length;a++){const[i,o,g]=l[a];if(n[i]&&n[i]===n[o]&&n[i]===n[g])return n[i]}}}function M(){const s=new G;function e(a){return k(s.squareValues[a],{name:`square-${a}`,events:{click:()=>s.squareClicked(a)},disabled:c(()=>s.squareIsDisabled(a)),textColor:c(()=>s.squareValues[a].get()==="X"?t.color.red:t.color.green),vOffset:-8})}function n(){const a=c(()=>s.moveList.get().map((i,o)=>`Go to Move ${o+1}`));return C(a,(i,o)=>({name:`goto-${o}`,selectionColor:t.color.tertiary,background:t.color.secondaryContainer,events:{click:()=>s.goToMove(o)}}))}function l(){return x({label:"New Game",font:t.font.title_medium,rounding:t.rounding.r3,padding:t.space.s4,marginTop:t.space.s7,background:t.color.secondaryContainer,action:()=>s.newGame(),hidden:c(()=>!s.gameOver())})}return u({name:"TicTacToe",model:s,justifyContent:"start",height:y(100),gap:t.space.s5}).append(m("Tic-Tac-Toe",{name:"game-title",padding:t.space.s5,font:t.font.display_medium}),f({gap:t.space.s7}).append(L({nrows:3,ncolumns:3,gap:t.space.s2,width:b(50)}).append(...d.sequence(0,9).map(a=>e(a))),u({justifyContent:"start",border:t.border.thin,minHeight:q(20),background:t.color.secondaryContainer}).append(m("History",{name:"history-title",font:t.font.title_medium.bold(),background:t.color.secondaryContainer}),u({minWidth:w(16),padding:t.space.s2,background:t.color.secondaryContainer}).append(n()))),m(s.status,{name:"status",font:t.font.headline_medium}),l())}function N(){return O(V)}const V={sourceDir:"/source/Demos/TicTacToe",sections:[{title:"Tic Tac Toe",componentFn:M,sources:["TicTacToe.ts","TicTacToeModel.ts"],markdown:"TicTacToe.md"}]};export{N as TicTacToeDemo,N as default};
