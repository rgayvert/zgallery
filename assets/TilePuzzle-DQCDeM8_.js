var P=Object.defineProperty;var S=(o,t,e)=>t in o?P(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e;var l=(o,t,e)=>(S(o,typeof t!="symbol"?t+"":t,e),e);import{a as i,g as r,k as f,p,c as s,P as A,h as B,cb as g,B as v,cc as C,C as D,cd as z,ce as b,ah as $,m as L,V as R,f as q,H as G,D as H,bi as I,L as O,$ as M,G as N}from"./index-BPP06xGk.js";function x(o,t){return r(o%t,Math.floor(o/t))}class U{constructor(t,e,n){l(this,"home");l(this,"location");this.n=t,this.index=e,this.initialIndex=n,this.home=x(e,t),this.location=i(x(n,t))}title(){return this.isBlank()?"":this.index.toString()}get current(){return this.location.get()}get x(){return this.current.x}get y(){return this.current.y}isBlank(){return this.index===this.n*this.n-1}isHome(){return this.home.equals(this.current)}onSameRowAs(t){return this.current.y===t.current.y}inSameColumnAs(t){return this.current.x===t.current.x}moveRight(){this.location.set(r(this.x+1,this.y))}moveLeft(){this.location.set(r(this.x-1,this.y))}moveDown(){this.location.set(r(this.x,this.y+1))}moveUp(){this.location.set(r(this.x,this.y-1))}}class k{constructor(t){l(this,"tiles");l(this,"blank");const e=f.randomSequence(0,t*t);this.tiles=Array(t*t);for(let n=0;n<t*t;n++)this.tiles[n]=new U(t,n,e[n]);this.blank=this.tiles[t*t-1]}tileAt(t){return this.tiles.find(e=>e.current.equals(t))}tileClicked(t){this.tileIsActive(t)&&this.moveTile(t)}tileIsActive(t){return t.onSameRowAs(this.blank)||t.inSameColumnAs(this.blank)}moveTile(t){const e=t.current;t.onSameRowAs(this.blank)?t.x<this.blank.x?this.pushRight(t):this.pushLeft(t):t.y<this.blank.y?this.pushDown(t):this.pushUp(t),this.blank.location.set(e)}pushLeft(t){for(let e=this.blank.x+1;e<=t.x;e++)this.tileAt(r(e,t.y)).moveLeft()}pushRight(t){for(let e=this.blank.x-1;e>=t.x;e--)this.tileAt(r(e,t.y)).moveRight()}pushUp(t){for(let e=this.blank.y+1;e<=t.y;e++)this.tileAt(r(t.x,e)).moveUp()}pushDown(t){for(let e=this.blank.y-1;e>=t.y;e--)this.tileAt(r(t.x,e)).moveDown()}}function W(o,t,e){return B({label:o.title(),rounding:s.rounding.r0,color:s.color.background.contrast,background:i(()=>o.isBlank()?s.color.transparent:o.isHome()?s.color.green:s.color.secondaryContainer),gridArea:i(()=>`${o.y+1} / ${o.x+1}`),fontSize:i(()=>g(.3/e)),model:o,action:()=>t.tileClicked(o),ripple:!1,componentName:"Square"})}function V(o){const t=new k(o),e={nrows:o,ncolumns:o,gap:p(2),background:s.color.blue,aspectRatio:1,border:s.border.medium.color(s.color.blue),componentName:"TilePuzzle"};return A(e).append(...t.tiles.map(n=>W(n,t,o)))}function _(o,t,e){const c=C(`(100% - ((${e} + 1) * 3px)) / ${e}`);return D(o.title(),{position:"absolute",left:i(()=>z(b(c,o.x),p((o.x+1)*3))),top:i(()=>z(b(c,o.y),p((o.y+1)*3))),background:i(()=>o.isBlank()?s.color.transparent:o.isHome()?s.color.green:s.color.secondaryContainer),fontSize:i(()=>g(.3/e)),width:c,height:c,rounding:s.rounding.r0,color:s.color.background.contrast,clickAction:()=>t.tileClicked(o),transition:o.isBlank()?"":"all 0.3s",model:o,componentName:"Square"})}function E(o){const t=new k(o),e={background:s.color.blue,aspectRatio:1,componentName:"TilePuzzle"};return v(e).append(...t.tiles.map(n=>_(n,t,o)))}function F(){const o=f.sequence(3,4).map(a=>`${a} x ${a}`),t=i(""),e=["Box","Grid"],n=i(""),c=i(()=>`${t.get()}-${n.get()}`),y={font:s.font.title_medium,padding:s.space.s2,rounding:s.rounding.pill},w={font:s.font.title_medium};function T(a){const[u,h]=a.split("-"),d=parseInt(u);return h==="Box"?E(d):V(d)}function m(a,u,h){return O(a,w).append(M(u,h,y))}return $({maxWidth:L(100)}).append(R({width:q(100),alignItems:"center"}).append(G({gap:s.space.s4}).append(m("Size:",t,o),m("Type:",n,e)),H(s.space.s5),I(c,a=>T(a))))}function Q(){return N(j)}const j={sourceDir:"/source/Demos/TilePuzzle",sections:[{title:"Tile Puzzle",componentFn:F,sources:["TilePuzzleModel.ts","BoxTilePuzzle.ts","GridTilePuzzle.ts","TilePuzzleGame.ts"],markdown:"TilePuzzle.md"}]};export{Q as TilePuzzle,Q as default};
