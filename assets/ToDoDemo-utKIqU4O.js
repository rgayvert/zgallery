var O=Object.defineProperty;var B=(s,t,e)=>t in s?O(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var d=(s,t,e)=>(B(s,typeof t!="symbol"?t+"":t,e),e);import{ca as F,aa as R,f as p,b as r,ac as A,a as l,H as w,a1 as U,ap as L,c7 as E,bN as k,e as H,b$ as M,cb as N,ax as V,aM as b,m as P,ag as W,B as _,j as x,k as $,bl as y,x as T,az as G,g as J,ai as q,a3 as z,a2 as K,at as Q,cc as X,t as C,G as Y}from"./index-B2MlLmhe.js";class Z{constructor(t){this.list=t}push(t,e){this.list.addValue(t),console.log(t)}}class tt extends F{constructor(t,e,a=[],n){super(e,a,n),this.baseURL=t,this.excludedProperties=a,this.ex=n}toString(){return`FetchTStore[${this.baseURL}]`}async create(t,e){var o,c;const{recordID:a,...n}=e,i={method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}};try{const h=await fetch(this.baseURL,i);if(h.ok){const f=await h.json(),g=this.plainToInstance(f);t.push(g)}else(o=this.ex)==null||o.push(`${this.toString()}/create: ${h.status}`)}catch(h){(c=this.ex)==null||c.push(`${this.toString()}/create: fetch failed`,h)}}async get(t,e){var i,o;const a={method:"GET"},n=`${this.baseURL}/${e}`;try{const c=await fetch(n,a);if(c.ok){const h=await c.json(),f=this.plainToInstance(h);t.push(f)}else(i=this.ex)==null||i.push(`${this.toString()}/get: ${c.status}`)}catch(c){(o=this.ex)==null||o.push(`${this.toString()}/get: fetch failed`,c)}}async getAll(t,e){var n,i;const a={method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}};try{const o=await fetch(`${this.baseURL}/all`,a);if(o.ok){const h=(await o.json()).map(f=>this.plainToInstance(f));t.set(h)}else(n=this.ex)==null||n.push(`${this.toString()}/getAll: ${o.status}`)}catch(o){(i=this.ex)==null||i.push(`${this.toString()}/getAll: fetch failed`,o)}}async update(t){var n,i;const e={method:"PUT",body:JSON.stringify(this.instanceToPlain(t)),headers:{"Content-Type":"application/json"}},a=`${this.baseURL}/${t.recordID}`;try{const o=await fetch(a,e);o.ok||(n=this.ex)==null||n.push(`${this.toString()}/update: ${o.status}`)}catch(o){(i=this.ex)==null||i.push(`${this.toString()}/update: fetch failed`,o)}}async delete(t){var n,i;const e={method:"DELETE"},a=`${this.baseURL}/${t.recordID}`;try{const o=await fetch(a,e);o.ok?this.removeRecord(t):(n=this.ex)==null||n.push(`${this.toString()}/getAll: ${o.status}`)}catch(o){(i=this.ex)==null||i.push(`${this.toString()}/getAll: fetch failed`,o)}}}R("ItemPanel","Box",{width:p(100),padding:r.space.s0,alignItems:"center",justifyContent:"center"});function et(s,t,e={}){const a=A("ItemPanel",e),n=l(!0),i={hovered:l(!1)};a.sharedState=i,a.componentName="ItemPanel",a.model=[t,s];const o=t.store.createEditor(s);return w(a).append(U(o.completed,{font:r.font.headline_medium}),L(o.content,{readOnly:n,width:E("100% - 5em"),textDecoration:l(()=>s.completed?"line-through":""),outlineWhenEdited:!0,editOnDoubleClick:!0}),k("x",{hidden:l(()=>{var c;return!((c=i.hovered)!=null&&c.get())}),position:"absolute",right:H(.1),font:r.font.title_medium,action:()=>t.deleteRecord(s)}))}var m=(s=>(s.All="All",s.Active="Active",s.Completed="Completed",s))(m||{});class I extends M{constructor(){super(...arguments);d(this,"content","");d(this,"completed",!1)}}class S{constructor(t=S.defaultStore()){d(this,"newText",l("",{action:t=>this.createNewText(t)}));d(this,"filterNames",[m.All,m.Active,m.Completed]);d(this,"currentFilterName",l(m.All));d(this,"count");d(this,"activeCount",l(0));d(this,"filteredRecords");d(this,"completedCount");d(this,"records");d(this,"toastItems",V([],{maxLength:1}));d(this,"ex",new Z(this.toastItems));this.store=t,this.records=t.createRecordList(),this.count=l(()=>this.countText()),this.filteredRecords=l(()=>this.getFilteredRecords()),this.completedCount=l(()=>this.records.count(e=>e.completed)),this.records.addAll()}static defaultStore(){return new N("todo",I)}setStore(t){this.store=t,this.records.store=t,this.records.set(t.createRecordList().get()),this.records.addAll()}itemMatchesCurrentFilter(t){const e=this.currentFilterName.get();return e===m.All||b(t.completed)&&e===m.Completed||!b(t.completed)&&e===m.Active}getFilteredRecords(){return this.records.filter(t=>this.itemMatchesCurrentFilter(t))}countText(){const t=this.getFilteredRecords().length;return`${t} item${t===1?"":"s"} left`}createNewText(t){t.trim()&&(this.records.addNew({recordID:-1,content:t,completed:!1}),this.newText.set(""))}toggleAllItems(){const t=this.completedCount.get()<this.records.length;this.records.forEach(e=>e.completed=t)}clearCompletedItems(){this.records.deleteAll(...this.records.filter(t=>t.completed))}itemCount(){return this.records.length}deleteRecord(t){this.records.deleteRecord(t)}}R("ToDo","Page",{maxWidth:P(100)});function ot(s={}){const t=A("ToDo",s),e=new S,a=l(()=>e.itemCount()===0),n=l(()=>e.completedCount.get()===0);function i(){return w({width:p(100),alignItems:"center",paddingBlockStart:r.space.s3}).append(J({leadingIconURI:"icon.chevron-down",font:r.font.headline_medium,title:"Toggle All",padding:r.space.s0,action:()=>e.toggleAllItems(),border:r.border.none}),L(e.newText,{font:r.font.title_medium,placeholder:"What needs to be done?",firstFocus:!0,setOnInput:!1,readOnly:!1,width:p(100)}))}function o(u){return et(u,e,{id:`item-${u.recordID}`,maxWidth:t.maxWidth||P(100),effects:{mounted:X(C.fadeIn("in"),C.slide("out","left",.3))}})}function c(){return x({width:p(100)}).append(q(e.filteredRecords,u=>`item-${u.recordID}`,u=>o(u)))}function h(){return w({hidden:a,font:r.font.body_medium,width:p(100),padding:r.space.s4}).append($(e.count,{rounding:r.rounding.r0}),T(1),z(e.currentFilterName,e.filterNames,{rounding:r.rounding.r0}),T(1),k("Clear Completed",{action:()=>e.clearCompletedItems(),hidden:n}))}function f(u){e.setStore(u==="Local"?new N("todo",I):new tt("http://localhost:3002/todo-api",I,[],e.ex))}const g=l("Local",{action:u=>f(u)}),D=["Local","Remote"];function v(){return K(g,D,D,{flexDirection:"row",radioButtonOptions:{onIcon:"icon.square-box-filled",offIcon:"icon.square-box-outlined"}})}const j={width:p(100),rounding:r.rounding.r3,elevation:5,alignItems:"center",overflow:"hidden",border:r.border.thin};return W(t).append(_({padding:r.space.s6}).append(x({width:p(100),alignItems:"center"}).append($("todos",{font:r.font.display_medium}),x(j).append(i(),y({width:p(95)}),c(),y({width:p(99)}),h()),T(r.space.s6),v())),G(e.toastItems,{placement:Q.center,maxItems:1,duration:1500}))}function it(){return Y(st)}const st={sourceDir:"/source/Demos/ToDo",sections:[{title:"ToDo",componentFn:()=>ot(),sources:["View/ToDo.ts","View/ItemPanel.ts","Model/ToDoModel.ts","Data/ToDoData.ts"],markdown:"ToDo.md"}]};export{it as ToDoDemo,it as default};
