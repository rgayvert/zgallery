var S=Object.defineProperty;var A=(o,t,e)=>t in o?S(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e;var l=(o,t,e)=>(A(o,typeof t!="symbol"?t+"":t,e),e);import{a as i,g as r,k as g,p,c as n,P as B,h as v,cb as k,B as C,cc as D,C as $,cd as z,ce as b,ah as L,m as R,f as x,V as q,H as G,D as H,bi as I,L as M,$ as O,G as N}from"./index-BqCH1o6h.js";function f(o,t){return r(o%t,Math.floor(o/t))}class U{constructor(t,e,s){l(this,"home");l(this,"location");this.n=t,this.index=e,this.initialIndex=s,this.home=f(e,t),this.location=i(f(s,t))}title(){return this.isBlank()?"":this.index.toString()}get current(){return this.location.get()}get x(){return this.current.x}get y(){return this.current.y}isBlank(){return this.index===this.n*this.n-1}isHome(){return this.home.equals(this.current)}onSameRowAs(t){return this.current.y===t.current.y}inSameColumnAs(t){return this.current.x===t.current.x}moveRight(){this.location.set(r(this.x+1,this.y))}moveLeft(){this.location.set(r(this.x-1,this.y))}moveDown(){this.location.set(r(this.x,this.y+1))}moveUp(){this.location.set(r(this.x,this.y-1))}}class y{constructor(t){l(this,"tiles");l(this,"blank");const e=g.randomSequence(0,t*t);this.tiles=Array(t*t);for(let s=0;s<t*t;s++)this.tiles[s]=new U(t,s,e[s]);this.blank=this.tiles[t*t-1]}tileAt(t){return this.tiles.find(e=>e.current.equals(t))}tileClicked(t){this.tileIsActive(t)&&this.moveTile(t)}tileIsActive(t){return t.onSameRowAs(this.blank)||t.inSameColumnAs(this.blank)}moveTile(t){const e=t.current;t.onSameRowAs(this.blank)?t.x<this.blank.x?this.pushRight(t):this.pushLeft(t):t.y<this.blank.y?this.pushDown(t):this.pushUp(t),this.blank.location.set(e)}pushLeft(t){for(let e=this.blank.x+1;e<=t.x;e++)this.tileAt(r(e,t.y)).moveLeft()}pushRight(t){for(let e=this.blank.x-1;e>=t.x;e--)this.tileAt(r(e,t.y)).moveRight()}pushUp(t){for(let e=this.blank.y+1;e<=t.y;e++)this.tileAt(r(t.x,e)).moveUp()}pushDown(t){for(let e=this.blank.y-1;e>=t.y;e--)this.tileAt(r(t.x,e)).moveDown()}}function W(o,t,e){return v({label:o.title(),rounding:n.rounding.none,color:n.color.background.contrast,background:i(()=>o.isBlank()?n.color.transparent:o.isHome()?n.color.green:n.color.secondaryContainer),gridArea:i(()=>`${o.y+1} / ${o.x+1}`),fontSize:i(()=>k(.3/e)),model:o,action:()=>t.tileClicked(o),ripple:!1,componentName:"Square"})}function V(o){const t=new y(o),e={nrows:o,ncolumns:o,gap:p(2),background:n.color.blue,aspectRatio:1,border:n.border.medium.color(n.color.blue),componentName:"TilePuzzle"};return B(e).append(...t.tiles.map(s=>W(s,t,o)))}function _(o,t,e){const c=D(`(100% - ((${e} + 1) * 3px)) / ${e}`);return $(o.title(),{position:"absolute",left:i(()=>z(b(c,o.x),p((o.x+1)*3))),top:i(()=>z(b(c,o.y),p((o.y+1)*3))),background:i(()=>o.isBlank()?n.color.transparent:o.isHome()?n.color.green:n.color.secondaryContainer),fontSize:i(()=>k(.3/e)),width:c,height:c,rounding:n.rounding.none,color:n.color.background.contrast,clickAction:()=>t.tileClicked(o),transition:o.isBlank()?"":"all 0.3s",model:o,componentName:"Square"})}function E(o){const t=new y(o),e={background:n.color.blue,aspectRatio:1,componentName:"TilePuzzle"};return C(e).append(...t.tiles.map(s=>_(s,t,o)))}function F(){const o=g.sequence(3,4).map(a=>`${a} x ${a}`),t=i(""),e=["Box","Grid"],s=i(""),c=i(()=>`${t.get()}-${s.get()}`),w={font:n.font.title_medium,padding:n.space.s2,rounding:n.rounding.pill},T={font:n.font.title_medium};function P(a){const[u,h]=a.split("-"),d=parseInt(u);return h==="Box"?E(d):V(d)}function m(a,u,h){return M(a,T).append(O(u,h,w))}return L({maxWidth:R(100),width:x(90)}).append(q({width:x(100),alignItems:"center"}).append(G({gap:n.space.s4}).append(m("Size:",t,o),m("Type:",s,e)),H(n.space.s5),I(c,a=>P(a))))}function Q(){return N(j)}const j={sourceDir:"/source/Demos/TilePuzzle",sections:[{title:"Tile Puzzle",componentFn:F,sources:["TilePuzzleModel.ts","BoxTilePuzzle.ts","GridTilePuzzle.ts","TilePuzzleGame.ts"],markdown:"TilePuzzle.md"}]};export{Q as TilePuzzle,Q as default};
