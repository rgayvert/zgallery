var h=Object.defineProperty;var u=(e,t,s)=>t in e?h(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var i=(e,t,s)=>(u(e,typeof t!="symbol"?t+"":t,s),s);import{a,t as l,g as o,v as n}from"./index-Bz43khRn.js";class d{constructor(t=o(0,0),s=n(0,0)){i(this,"location",a(o(0,0)));i(this,"velocity",a(n(0,0)));i(this,"bounds");i(this,"speed",a(()=>this.velocity.get().magnitude()));this.initialLocation=t,this.initialVelocity=s,this.setToInitialValues()}setLocation(t){this.location.set(t.clampToRect(this.bounds))}setVelocity(t,s){this.velocity.set(n(t,s))}step(t,s){this.setLocation(this.location.get().add(this.velocity.get().scalarMultiply(t)))}begin(){this.setToInitialValues()}end(){this.setToInitialValues()}setToInitialValues(){this.setLocation(this.initialLocation),this.velocity.set(this.initialVelocity)}transformPxLocation(){return`translate(${this.location.get().x}px, ${this.location.get().y}px)`}}class g{constructor(t={}){i(this,"animator");i(this,"running");this.animator=this.basicAnimator(),this.running=this.animator.running}basicAnimator(){return new m}get isRunning(){return this.animator.isRunning}start(){this.animator.start()}pause(){this.animator.pause()}stop(){this.animator.stop()}startOrStop(){this.isRunning?this.stop():this.start()}add(...t){this.animator.add(...t)}setItems(t){this.animator.setItems(t)}}class m{constructor(t={}){i(this,"startTimestamp",0);i(this,"previousTimestamp",0);i(this,"elapsed",0);i(this,"duration");i(this,"items",new Set([]));i(this,"state",a("stopped"));i(this,"running",l(!1,{action:t=>t?this.start():this.stop()}));this.duration=t.duration||Number.MAX_VALUE}setItems(t){this.items=new Set([...t])}add(...t){t.forEach(s=>this.items.add(s))}remove(t){this.items.delete(t)}requestFrame(){this.isRunning&&window.requestAnimationFrame(t=>this.step(t))}get isRunning(){return this.state.get()==="running"}start(){this.state.get()!=="running"&&(this.state.set("running"),this.running.set(!0),this.items.forEach(t=>{var s;return(s=t.begin)==null?void 0:s.call(t)}),this.requestFrame())}stop(){this.state.set("stopped"),this.running.set(!1),this.startTimestamp=0,this.items.forEach(t=>{var s;return(s=t.end)==null?void 0:s.call(t)})}pause(){this.state.set("paused"),this.startTimestamp=0}resume(){this.start()}step(t){if(!this.isRunning)return;this.startTimestamp===0&&(this.startTimestamp=t,this.previousTimestamp=t),this.elapsed=t-this.startTimestamp;const s=t-this.previousTimestamp;s!==0&&(this.items.forEach(r=>r.step(s,this.elapsed)),this.elapsed>=this.duration&&this.stop()),this.previousTimestamp=t,this.requestFrame()}}export{g as A,m as B,d as S};
