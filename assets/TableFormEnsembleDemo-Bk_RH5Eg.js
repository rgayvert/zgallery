var g=Object.defineProperty;var f=(t,e,s)=>e in t?g(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var i=(t,e,s)=>(f(t,typeof e!="symbol"?e+"":e,s),s);import{a,c6 as w,c7 as A,f as b,aH as M,c as n,e as T,V as F,bA as D,H as R,l as E,D as v,h as S,aw as y,bj as U,aF as N,c8 as P,by as u,c9 as x,G as C}from"./index-Kkg4vrHy.js";import{d as l}from"./FormFieldValidators-CJk185Fg.js";class k{constructor(e,s,r){i(this,"editor");i(this,"currentView",a("table"));i(this,"validationOn",a(!1));i(this,"editedRecord");this.recordClass=e,this.store=s,this.tableModel=r,this.editedRecord=a(new e(this.store)),this.editor=w(this.editedRecord.get())}get selectedRecord(){return this.tableModel.selectedRow.get()}newRecord(){this.editRecord(new this.recordClass(this.store),!1)}editSelectedRecord(){const e=this.selectedRecord;e&&this.editRecord(e,!0)}editRecord(e,s){this.editedRecord.set(e),A(this.editor,e),this.validationOn.set(s),this.currentView.set("form")}deleteRecord(){const e=this.selectedRecord;e&&(this.tableModel.delete(e),this.store.delete(e))}hasSelection(){return!!this.selectedRecord}selectionIsPersisted(){var e;return!!((e=this.selectedRecord)!=null&&e.isPersisted())}editedRecordIsPersisted(){var e;return!!((e=this.editedRecord.get())!=null&&e.isPersisted())}setMode(e){this.currentView.set(e)}cancelEdit(){this.setMode("table")}submitRecord(){const e=this.editedRecord.get();e&&(this.selectionIsPersisted()?(e.update(),this.tableModel.updateRowWithRecord(e)):(e.create(),this.tableModel.addRowAtEnd(e)),this.setMode("table"))}}function B(t,e){const r={templateColumns:`repeat(${Math.max(...Object.values(e).map(o=>(o==null?void 0:o.gridArea.c2)||2))-1}, 1fr)`,resetLabel:a(()=>t.selectionIsPersisted()?"":"Clear"),submitLabel:a(()=>t.editedRecordIsPersisted()?"Update":"Create"),cancelAction:()=>t.cancelEdit(),submitAction:()=>t.submitRecord(),validationOn:t.validationOn,width:b(90)};return M(t.editedRecord,t.editor,e,r)}function I(t){function e(c,h,m){return S({label:c,controlSize:"sm",rounding:n.rounding.pill,action:h,disabled:m})}const s=a(!0);function r(){return y(s,"Are you sure?",()=>t.deleteRecord(),{acceptLabel:"Yes",rejectLabel:"No"})}function o(){return R({width:b(100)}).append(E("Users",{font:n.font.title_large}),v(1),R({gap:n.space.s3}).append(e("Add",()=>t.newRecord()),e("Edit",()=>t.editSelectedRecord(),a(()=>!t.hasSelection())),e("Delete",()=>s.set(!1),a(()=>!t.hasSelection())).append(r())))}const d={model:t,justifyContent:"start",gap:n.space.s3,minHeight:T(15),name:"TFTable"};return F(d).append(o(),D(t.tableModel,{width:b(100),border:n.border.thin,doubleClickAction:()=>t.editSelectedRecord()}))}function L(t,e,s,r){const o=new k(t,e,s);return U(o.currentView,d=>d==="table"?I(o):B(o,r))}class p extends N{constructor(s,r="",o="",d="",c="",h="",m=""){super(s);i(this,"recordID",-1);this.title=r,this.firstName=o,this.lastName=d,this.email=c,this.password=h,this.role=m}get name(){return[this.title,this.firstName,this.lastName].filter(s=>s).join(" ")}}function O(){return{title:{label:"Title",type:"select",choices:["","Mr","Mrs","Miss","Ms"],gridArea:{r1:1,c1:1,r2:2,c2:2},validators:[l.notBlank]},lastName:{label:"Last Name",type:"string",gridArea:{r1:1,c1:2,r2:2,c2:5},validators:[l.length(1,20),l.lettersOnly]},firstName:{label:"First Name",type:"string",gridArea:{r1:1,c1:5,r2:2,c2:8},validators:[l.notBlank]},email:{label:"Email",type:"email",gridArea:{r1:2,c1:1,r2:3,c2:5},validators:[l.email]},role:{label:"Role",type:"select",choices:["","Admin","User"],gridArea:{r1:2,c1:5,r2:3,c2:8},validators:[l.notBlank]},password:{label:"Password",type:"password",gridArea:{r1:3,c1:1,r2:4,c2:4},validators:[l.length(6)]}}}class V{constructor(){i(this,"store",new P("demo_user",p));i(this,"columns",[u({title:"Name",value:e=>e.name,alignment:"left"}),u({title:"Email",value:e=>e.email,alignment:"left"}),u({title:"Role",value:e=>e.role,alignment:"left"})]);i(this,"userTableModel");this.addInitialRecord(),this.userTableModel=new x(this.allUsers,this.columns)}get allUsers(){return this.store.getAllRecords()}addInitialRecord(){const e=this.store.createRecordList();e.addAction(s=>{if(s.length===0){const r=new p(this.store,"Mr","John","Smith","john@smith.com","123456","Admin");this.store.create(r)}}),this.store.getAll(e)}}function j(){const t=new V;return L(p,t.store,t.userTableModel,O())}function z(){return C(G)}const G={sourceDir:"/source/Demos/Panels",sections:[{title:"Table Form Ensemble",componentFn:j,sources:["TFEnsembleExample.ts","DemoUserRecord.ts","DemoUserFields.ts","DemoUserModel.ts"],markdown:"TFEnsembleExample.md"}]};export{z as PendulumWavesDemo,z as default};
