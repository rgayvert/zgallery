var b=Object.defineProperty;var w=(a,t,e)=>t in a?b(a,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[t]=e;var o=(a,t,e)=>(w(a,typeof t!="symbol"?t+"":t,e),e);import{a7 as k,a as n,R as d,d as G,l as T,aj as l,ak as x,al as L,am as A,b as i,e as c,H as g,an as S,B as V,f as p,ao as f,j as I,m as u,x as v,k as H,ap as y,L as N,a4 as j}from"./index-DlBCob52.js";class K{constructor(t,e){o(this,"currentHex");o(this,"currentRawHex");o(this,"currentHexRGB");o(this,"colorToken");o(this,"red");o(this,"green");o(this,"blue");o(this,"hexLen");this.currentRGBColor=t,this.storageKey=e;const s="#5588ee";this.hexLen=7,this.currentHex=k.instance.addAtom(this.storageKey,s),this.currentRawHex=n(this.currentHex.get(),{action:r=>this.isValidHexColor(r)&&this.setCurrentHexAndComps(r)}),this.currentHexRGB=n(this.currentHex.get().slice(0,this.hexLen),{action:()=>this.hexRGBChanged()}),t.set(d(this.currentHex.get())),t.addAction(r=>this.currentHex.set(r.asHex())),this.colorToken=n(()=>G({color:this.currentRGBColor.get()})),this.red=n(()=>this.currentRGBColor.get().comp[0],{action:r=>this.hexChanged(this.currentHex,0,r)}),this.green=n(()=>this.currentRGBColor.get().comp[1],{action:r=>this.hexChanged(this.currentHex,1,r)}),this.blue=n(()=>this.currentRGBColor.get().comp[2],{action:r=>this.hexChanged(this.currentHex,2,r)})}isValidHexColor(t){return t.length===this.hexLen&&!isNaN(+("0x"+t.substring(1)))}setCurrentHex(t){const e=t.substring(0,this.hexLen);this.currentHex.set(e),this.currentRawHex.set(e),this.currentRGBColor.set(d(this.currentHex.get()))}setCurrentHexAndComps(t){this.setCurrentHex(t);const e=T.sequence(0,4).map(s=>parseInt(t.substring(s*2+1,s*2+3),16));this.red.set(e[0]),this.green.set(e[1]),this.blue.set(e[2])}hexRGBChanged(){this.setCurrentHex(l(x(this.currentHexRGB.get())))}hexChanged(t,e,s){const r=x(t.get());r[e]=Math.round(s),t.set(l(r)),this.setCurrentHex(t.get())}}function z(a,t){const e=new K(a,t),s=L(!0);function r(B,R){return N(B).append(j(R,{minVal:0,maxVal:255,round:!0,width:u(15),radiusRatio:20}))}const h=n(()=>e.isValidHexColor(e.currentRawHex.get())),C=i.border.thin,m=A({color:i.color.error,width:c(.1)});return g({gap:i.space.s2,model:e,name:"ColorSelector"}).append(S({height:c(8),width:c(8)}).append(V({position:"absolute",border:i.border.thin,padding:i.space.s2,background:e.colorToken,height:p(100),width:p(100),clickAction:()=>s.set(!0)}).append(f(e.currentRGBColor,{pickTrigger:s,opacity:0}))),I({width:u(32)}).append(r("R",e.red),r("G",e.green),r("B",e.blue),v(c(1)),g({gap:i.space.s3}).append(H("Hex:"),y(e.currentRawHex,{textTransform:"lowercase",width:u(8),border:n(()=>h.get()?C:m),valid:h}),H("âœ—",{hidden:n(()=>h.get())}))))}export{z as C};
