var M=Object.defineProperty;var G=(t,e,r)=>e in t?M(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var a=(t,e,r)=>(G(t,typeof e!="symbol"?e+"":e,r),r);import{aP as R,an as y,H as h,b as n,k as A,e as g,g as S,q as W,a as i,l as w,b4 as F,j as f,Z as $,T as O,m as b,ap as U,L as k,a5 as V,a4 as x,f as C,bt as L,ad as E,p as I,ai as j,aH as _,B as H,bu as P,bv as q,bw as Y,G as z}from"./index-aIMxXOu_.js";import{c as X}from"./TimerAtom-ETJZjQxu.js";class Z{constructor(){a(this,"undoStack",R([]));a(this,"redoStack",R([]));a(this,"group")}describe(e){return`${Array.isArray(e)?e.map(o=>o.description).toString():e.description||""} undo=${this.undoStack.length} redo=${this.redoStack.length}`}performWithUndo(e,r,o){e();const d={forward:e,reverse:r,description:o};this.group?this.group.push(d):(this.undoStack.push(d),this.redoStack.clear())}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}undoGroup(e){[...e].reverse().forEach(r=>r.reverse())}redoGroup(e){[...e].forEach(r=>r.forward())}undo(){const e=this.undoStack.pop();e&&(Array.isArray(e)?this.undoGroup(e):e.reverse(),this.redoStack.push(e))}redo(){const e=this.redoStack.pop();e&&(Array.isArray(e)?this.redoGroup(e):e.forward(),this.undoStack.push(e))}beginGroup(){this.group=[]}endGroup(){this.group&&(this.undoStack.push(this.group),this.group=void 0)}}class J{constructor(){a(this,"counter",W(0));a(this,"count",i(()=>this.counter.get().toString()))}}function K(){const t=new J;return y().append(h({padding:n.space.s6,gap:n.space.s5}).append(A(t.count,{minWidth:g(3),border:n.border.thin,color:n.color.primary,font:n.font.title_medium,padding:n.space.s2}),S({label:"Count",action:()=>t.counter.increment()})))}class N{constructor(){a(this,"temperature",i(0));a(this,"celsius",i(0));a(this,"fahrenheit",i(32));this.celsius.addAction(e=>this.temperature.set(e)),this.fahrenheit.addAction(e=>this.temperature.set((e-32)*5/9)),this.temperature.addAction(e=>{this.celsius.set(w.roundTo(e,2)),this.fahrenheit.set(w.roundTo(e*9/5+32,2))})}}function Q(){const t=new N;function e(o){return A(o,{minWidth:g(3),color:n.color.primary,font:n.font.title_medium,padding:n.space.s2})}function r(o){return F(o,{border:n.border.thin,decimalPlaces:2,width:g(4)})}return y().append(h({padding:n.space.s6,gap:n.space.s5}).append(r(t.celsius),e("Celsius"),e(" = "),r(t.fahrenheit),e("Fahrenheit")))}class ee{constructor(){a(this,"booking",i(""));a(this,"direction",i("one-way flight",{action:()=>this.booking.set("")}));a(this,"startDate",i(new Date,{action:e=>console.log("startDate="+e)}));a(this,"returnDate",i(new Date))}isOneWay(){return this.direction.get()==="one-way flight"}parseDateString(e){if(!this.dateStringIsValid(e))return;const r=parseInt(e.slice(0,2)),o=parseInt(e.slice(3,5))-1,d=parseInt(e.slice(6,10));return new Date(d,o,r)}formatDate(e){return`${e.getDate().toString().padStart(2,"0")}.${(e.getMonth()+1).toString().padStart(2,"0")}.${e.getFullYear().toString()}`}dateStringIsValid(e){return new RegExp(/^\d\d\.\d\d\.\d\d\d\d$/).test(e)}bookFlight(){const e=this.startDate.get(),r=this.returnDate.get(),o=e&&this.formatDate(e),d=r&&this.formatDate(r);this.booking.set(this.isOneWay()?`Leaving: ${o}`:`Leaving: ${o}<br>Returning: ${d}`)}datesAreValid(){const e=this.startDate.get(),r=this.returnDate.get();return!!(this.isOneWay()?e:e&&r&&e<r)}}const te=["one-way flight","return flight"];function re(){const t=new ee;function e(o,d){const l=i(t.formatDate(o.get()||new Date));l.addAction(s=>{o.set(t.parseDateString(s)),t.booking.set("")});const c=i(!0);return U(l,{border:n.border.thin,width:g(8),textAlign:"center",disabled:d,color:i(()=>d.get()?n.color.gray:n.color.primary),valid:c,background:i(()=>c.get()?n.color.background:n.color.pink),pattern:/^\d\d\.\d\d\.\d\d\d\d$/.source})}const r={name:"FlightBooker",border:n.border.thin,justifyContent:"center",padding:n.space.s6,gap:n.space.s5,model:t};return h({gap:n.space.s6}).append(f(r).append($(t.direction,te),e(t.startDate,i(!1)),e(t.returnDate,i(()=>t.isOneWay())),S({label:"Book",action:()=>t.bookFlight(),width:g(8),disabled:i(()=>!t.datesAreValid()),background:n.color.primaryContainer})),O(t.booking,{font:n.font.body_medium,minWidth:b(20)}))}class ne{constructor(){a(this,"elapsedTime",i(0,{action:e=>this.elapsedTimeChanged(e)}));a(this,"duration",i(10,{action:e=>this.durationChanged(e)}));a(this,"timer",X(e=>this.elapsedTime.set(e/1e3),.1));a(this,"percent",i(()=>100*this.elapsedTime.get()/this.duration.get()));a(this,"elapsedLabel",i(()=>w.printRoundedTo(this.elapsedTime.get(),1)))}elapsedTimeChanged(e){e>=this.duration.get()&&this.timer.pause()}durationChanged(e){this.elapsedTime.get()<this.duration.get()&&this.timer.resume()}reset(){this.timer.restart()}}function oe(){const t=new ne,e={minVal:0,maxVal:20,width:b(20)},r={border:n.border.thin,justifyContent:"center",margin:n.space.s6,padding:n.space.s6,gap:n.space.s5};return y().append(f(r).append(k("Elapsed Time:").append(V(t.percent)),A(t.elapsedLabel),k("Duration: ").append(x(t.duration,e)),h({gap:n.space.s5,width:C(100)}).append(S({label:"Start",action:()=>t.reset(),width:C(40)}),S({label:"Reset",action:()=>t.reset(),width:C(40)}))))}class se{constructor(){a(this,"initialRecords",[{last:"Mustermann",first:"Max"},{last:"Tisch",first:"Roman"},{last:"Emil",first:"Hans"}]);a(this,"filter",i(""));a(this,"allRecords",R(this.initialRecords));a(this,"filteredRecords",i(()=>this.allRecords.filter(e=>e.last.toLowerCase().startsWith(this.filter.get().toLowerCase())).sort((e,r)=>this.formatRecord(e).localeCompare(this.formatRecord(r))),{action:()=>this.listChanged()}));a(this,"selectedRecord",i(void 0,{action:e=>this.recordSelected(e)}));a(this,"first",i(""));a(this,"last",i(""))}clearSelectedRecord(){this.selectedRecord.set(void 0),this.first.set(""),this.last.set("")}listChanged(){const e=this.selectedRecord.get();e&&!this.filteredRecords.get().includes(e)&&this.clearSelectedRecord()}formatRecord(e){return`${e.last}, ${e.first}`}recordSelected(e){e&&(this.first.set(e.first),this.last.set(e.last))}readyToCreate(){return!!(this.first.get()&&this.last.get())}readyToUpdate(){return!!this.selectedRecord.get()}readyToDelete(){return!!this.selectedRecord.get()}createRecord(){const e={first:this.first.get(),last:this.last.get()};this.allRecords.push(e),this.selectedRecord.set(e)}updateRecord(){const e={first:this.first.get(),last:this.last.get()};this.deleteRecord(),this.allRecords.push(e)}deleteRecord(){const e=this.selectedRecord.get();e&&this.allRecords.delete(e),this.clearSelectedRecord()}}function ie(){const t=new se;function e(l,c){return k(l).append(U(c,{border:n.border.thin,width:b(15),textAlign:"start"}))}function r(l,c,s){return S({label:l,action:c,width:b(10),disabled:s,background:n.color.primaryContainer})}const o={border:n.border.thin,justifyContent:"center",padding:n.space.s6,gap:n.space.s8,model:t},d={width:C(100),height:g(10)};return f(o).append(h({gap:n.space.s7}).append(f({gap:n.space.s5}).append(e("Filter prefix:",t.filter),L(t.filteredRecords,t.selectedRecord,l=>t.formatRecord(l),d)),f({gap:n.space.s5,justifyContent:"start"}).append(e("Name:",t.first),e("Surname:",t.last))),h({gap:n.space.s5,justifyContent:"center"}).append(r("Create",()=>t.createRecord(),i(()=>!t.readyToCreate())),r("Update",()=>t.updateRecord(),i(()=>!t.readyToUpdate())),r("Delete",()=>t.deleteRecord(),i(()=>!t.readyToDelete()))))}const v=class v{constructor(){a(this,"undoManager",new Z);a(this,"circles",R([]));a(this,"initialRadius",25);a(this,"selectedID",i("",{action:()=>{var e;return this.selectedRadius.set(((e=this.selectedCircle)==null?void 0:e.r.get())||this.initialRadius)}}));a(this,"selectedRadius",i(this.initialRadius,{action:e=>this.changeSelectedRadiusWithUndo(this.selectedID.get(),e)}))}nextID(){return(v._nextID++).toString()}get selectedCircle(){return this.circles.find(e=>e.id===this.selectedID.get())}circleWithID(e){return this.circles.find(r=>r.id===e)}addCircleAt(e,r,o){this.circles.push({id:o,x:e,y:r,r:i(this.initialRadius)}),this.selectedID.set(o)}addCircleWithUndo(e,r){const o=this.nextID();this.undoManager.performWithUndo(()=>this.addCircleAt(e,r,o),()=>this.removeCircle(o),`AddCircle(${e}, ${r})`)}removeCircle(e){const r=this.circleWithID(e);r&&(this.circles.delete(r),r.id===this.selectedID.get()&&this.clearSelection())}changeSelectedRadiusWithUndo(e,r){const o=this.circleWithID(e);if(o){const d=o.r.get();this.undoManager.performWithUndo(()=>this.changeRadius(e,r),()=>this.changeRadius(e,d),`ChangeRadius(${d} => ${r})`)}}changeRadius(e,r){var o;(o=this.circleWithID(e))==null||o.r.set(r)}hasSelection(){return!!this.selectedID.get()}clearSelection(){this.selectedID.set("")}canUndo(){return this.undoManager.canUndo()}canRedo(){return this.undoManager.canRedo()}undo(){this.undoManager.undo()}redo(){this.undoManager.redo()}beginUndoGroup(){this.undoManager.beginGroup()}endUndoGroup(){this.undoManager.endGroup()}};a(v,"_nextID",1);let T=v;function ae(){const t=new T;function e(s){return _({id:s.id,cx:s.x,cy:s.y,r:s.r,stroke:n.color.black,strokeWidth:1,fill:i(()=>t.selectedID.get()===s.id?n.color.gray:n.color.background),clickAction:u=>o(u,s.id)})}function r(s){if(s.target instanceof Element){const u=s.target.getBoundingClientRect();t.addCircleWithUndo(s.clientX-u.left,s.clientY-u.top)}}function o(s,u){s.stopPropagation(),t.selectedID.set(u)}const d={width:g(10),minVal:5,maxVal:50,disabled:i(()=>!t.hasSelection()),onDragStart:()=>t.beginUndoGroup(),onDragEnd:()=>t.endUndoGroup()},l={width:b(10),background:n.color.primaryContainer},c=[{label:"Undo",action:()=>t.undo(),disabled:i(()=>!t.canUndo())},{label:"Redo",action:()=>t.redo(),disabled:i(()=>!t.canRedo())}];return f({gap:n.space.s4,justifyContent:"center"}).append(h({width:C(100),gap:n.space.s5,justifyContent:"center"}).append(...c.map(s=>S({...s,...l})),k("Radius:").append(x(t.selectedRadius,d))),y({padding:n.space.s4,border:n.border.thin}).append(E({width:I(400),height:I(400),clickAction:s=>r(s)}).append(j(t.circles,s=>s.id,s=>e(s)))))}function de(t){const e=w.sequence(0,7).map(o=>t.map(d=>""));e[1][0]="23",e[2][0]="10",e[1][1]="14",e[3][3]="=A1+B1",e[4][3]="=A1-B1",e[3][4]="=A1*A2",e[5][5]="=A1";const r=t.map((o,d)=>q(o,l=>l[d]));return Y(e,r)}function ce(){const t=[..."ABCDEF"],e=de(t);e.columns.forEach(c=>{const s=c.formatter;c.formatter=u=>l(s(u))});const r={editable:!0,dataCellViewOptions:{minWidth:b(7)}};function o(c,s,u){var m;const p=c.groups;if(p&&p[s]&&p[u]){const D=t.indexOf(p[s]),B=parseInt(p[u]);return((m=(e.rows.at(B)||[])[D])==null?void 0:m.toString())||""}else return""}function d(c){const s=/(?<col1>[A-G])(?<row1>[0-9])(?<op>[+\-*])(?<col2>[A-G])(?<row2>[0-9])/.exec(c);if(s){const p=parseInt(o(s,"col1","row1")),m=parseInt(o(s,"col2","row2")),D=s.groups.op;return(D==="+"?p+m:D==="-"?p-m:p*m).toString()}const u=/(?<col1>[A-G])(?<row1>[0-9])/.exec(c);return u?o(u,"col1","row1"):"!!"}function l(c){return c.startsWith("=")?d(c.slice(1)):c}return H({border:n.border.thin}).append(P(e,r))}function me(){return z(le)}const le={sourceDir:"/source/Demos/SevenGUIs",sections:[{title:"1. Counter",componentFn:K,sources:["SevenCounter.ts"],markdown:"SevenCounter.md"},{title:"2. Temperature Converter",componentFn:Q,sources:["SevenTempConverterModel.ts","SevenTempConverter.ts"],markdown:"SevenTempConverter.md"},{title:"3. Flight Booker",componentFn:re,sources:["SevenFlightBookerModel.ts","SevenFlightBooker.ts"],markdown:"SevenFlightBooker.md"},{title:"4. Timer",componentFn:oe,sources:["SevenTimerModel.ts","SevenTimer.ts"],markdown:"SevenTimer.md"},{title:"5. CRUD",componentFn:ie,sources:["SevenCRUDModel.ts","SevenCRUD.ts"],markdown:"SevenCRUD.md"},{title:"6. Circle Draw",componentFn:ae,sources:["SevenCircleDrawModel.ts","SevenCircleDraw.ts"],markdown:"SevenCircleDraw.md"},{title:"7. Cells",componentFn:ce,sources:["SevenCells.ts"],markdown:"SevenCells.md"}]};export{me as SevenGUIsDemo,me as default};
