var N=Object.defineProperty;var j=(s,t,e)=>t in s?N(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var d=(s,t,e)=>(j(s,typeof t!="symbol"?t+"":t,e),e);import{cb as B,aa as C,f as p,b as r,ac as A,a as l,H as I,a1 as U,ap as L,c8 as F,bO as E,e as V,c0 as M,cc as O,ax as H,aM as R,m as v,ag as W,B as z,j as T,k as y,bl as b,x,az as G,g as J,ai as q,a3 as K,a2 as Q,at as X,cd as Y,t as $,G as Z}from"./index-CJTWxX7x.js";class tt{constructor(t){this.list=t}push(t,e){this.list.addValue(t),console.log(t)}}class et extends B{constructor(t,e,a=[],n){super(e,a,n),this.baseURL=t,this.excludedProperties=a,this.ex=n}toString(){return`FetchTStore[${this.baseURL}]`}async create(t,e){var o,c;const{recordID:a,...n}=e,i={method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}};try{const h=await fetch(this.baseURL,i);if(h.ok){const m=await h.json(),g=this.plainToInstance(m);t.push(g)}else(o=this.ex)==null||o.push(`${this.toString()}/create: ${h.status}`)}catch(h){(c=this.ex)==null||c.push(`${this.toString()}/create: fetch failed`,h)}}async get(t,e){var i,o;const a={method:"GET"},n=`${this.baseURL}/${e}`;try{const c=await fetch(n,a);if(c.ok){const h=await c.json(),m=this.plainToInstance(h);t.push(m)}else(i=this.ex)==null||i.push(`${this.toString()}/get: ${c.status}`)}catch(c){(o=this.ex)==null||o.push(`${this.toString()}/get: fetch failed`,c)}}async getAll(t,e){var n,i;const a={method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}};try{const o=await fetch(`${this.baseURL}/all`,a);if(o.ok){const h=(await o.json()).map(m=>this.plainToInstance(m));t.set(h)}else(n=this.ex)==null||n.push(`${this.toString()}/getAll: ${o.status}`)}catch(o){(i=this.ex)==null||i.push(`${this.toString()}/getAll: fetch failed`,o)}}async update(t){var n,i;const e={method:"PUT",body:JSON.stringify(this.instanceToPlain(t)),headers:{"Content-Type":"application/json"}},a=`${this.baseURL}/${t.recordID}`;try{const o=await fetch(a,e);o.ok||(n=this.ex)==null||n.push(`${this.toString()}/update: ${o.status}`)}catch(o){(i=this.ex)==null||i.push(`${this.toString()}/update: fetch failed`,o)}}async delete(t){var n,i;const e={method:"DELETE"},a=`${this.baseURL}/${t.recordID}`;try{const o=await fetch(a,e);o.ok?this.removeRecord(t):(n=this.ex)==null||n.push(`${this.toString()}/getAll: ${o.status}`)}catch(o){(i=this.ex)==null||i.push(`${this.toString()}/getAll: fetch failed`,o)}}}C("ItemPanel","Box",{width:p(100),padding:r.space.s0,alignItems:"center",justifyContent:"center"});function ot(s,t,e={}){const a=A("ItemPanel",e),n=l(!0),i={hovered:l(!1)};a.sharedState=i,a.componentName="ItemPanel",a.model=[t,s];const o=t.store.createEditor(s);return I(a).append(U(o.completed,{font:r.font.headline_medium}),L(o.content,{readOnly:n,width:F("100% - 5em"),textDecoration:l(()=>s.completed?"line-through":""),outlineWhenEdited:!0,editOnDoubleClick:!0}),E("x",{hidden:l(()=>{var c;return!((c=i.hovered)!=null&&c.get())}),position:"absolute",right:V(.1),font:r.font.title_medium,action:()=>t.deleteRecord(s)}))}var f=(s=>(s.All="All",s.Active="Active",s.Completed="Completed",s))(f||{});class S extends M{constructor(){super(...arguments);d(this,"content","");d(this,"completed",!1)}}class w{constructor(t=w.defaultStore()){d(this,"newText",l("",{action:t=>this.createNewText(t)}));d(this,"filterNames",[f.All,f.Active,f.Completed]);d(this,"currentFilterName",l(f.All));d(this,"count");d(this,"activeCount",l(0));d(this,"filteredRecords");d(this,"completedCount");d(this,"records");d(this,"toastItems",H([],{maxLength:1}));d(this,"ex",new tt(this.toastItems));this.store=t,this.records=t.createRecordList(),this.count=l(()=>this.countText()),this.filteredRecords=l(()=>this.getFilteredRecords()),this.completedCount=l(()=>this.records.count(e=>e.completed)),this.records.addAll()}static defaultStore(){return new O("todo",S)}setStore(t){this.store=t,this.records.store=t,this.records.set(t.createRecordList().get()),this.records.addAll()}itemMatchesCurrentFilter(t){const e=this.currentFilterName.get();return e===f.All||R(t.completed)&&e===f.Completed||!R(t.completed)&&e===f.Active}getFilteredRecords(){return this.records.filter(t=>this.itemMatchesCurrentFilter(t))}countText(){const t=this.getFilteredRecords().length;return`${t} item${t===1?"":"s"} left`}createNewText(t){t.trim()&&(this.records.addNew({recordID:-1,content:t,completed:!1}),this.newText.set(""))}toggleAllItems(){const t=this.completedCount.get()<this.records.length;this.records.forEach(e=>e.completed=t)}clearCompletedItems(){this.records.deleteAll(...this.records.filter(t=>t.completed))}itemCount(){return this.records.length}deleteRecord(t){this.records.deleteRecord(t)}}var st={VITE_ROUTER:"hash",VITE_BASE_URL:"/zgallery",BASE_URL:"/zgallery/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};C("ToDo","Page",{maxWidth:v(100)});function nt(s={}){const t=A("ToDo",s),e=new w,a=l(()=>e.itemCount()===0),n=l(()=>e.completedCount.get()===0);function i(){return I({width:p(100),alignItems:"center",paddingBlockStart:r.space.s3}).append(J({leadingIconURI:"icon.chevron-down",font:r.font.headline_medium,title:"Toggle All",padding:r.space.s0,action:()=>e.toggleAllItems(),border:r.border.none}),L(e.newText,{font:r.font.title_medium,placeholder:"What needs to be done?",firstFocus:!0,setOnInput:!1,readOnly:!1,width:p(100)}))}function o(u){return ot(u,e,{id:`item-${u.recordID}`,maxWidth:t.maxWidth||v(100),effects:{mounted:Y($.fadeIn("in"),$.slide("out","left",.3))}})}function c(){return T({width:p(100)}).append(q(e.filteredRecords,u=>`item-${u.recordID}`,u=>o(u)))}function h(){return I({hidden:a,font:r.font.body_medium,width:p(100),padding:r.space.s4}).append(y(e.count,{rounding:r.rounding.r0}),x(1),K(e.currentFilterName,e.filterNames,{rounding:r.rounding.r0}),x(1),E("Clear Completed",{action:()=>e.clearCompletedItems(),hidden:n}))}function m(){return st.VITE_TODO_REMOTE}function g(u){e.setStore(u==="Local"?new O("todo",S):new et(m(),S,[],e.ex))}const P=l("Local",{action:u=>g(u)}),D=["Local","Remote"];function _(){if(m())return Q(P,D,D,{flexDirection:"row",radioButtonOptions:{onIcon:"icon.square-box-filled",offIcon:"icon.square-box-outlined"}})}const k={width:p(100),rounding:r.rounding.r3,elevation:5,alignItems:"center",overflow:"hidden",border:r.border.thin};return W(t).append(z({padding:r.space.s6}).append(T({width:p(100),alignItems:"center"}).append(y("todos",{font:r.font.display_medium}),T(k).append(i(),b({width:p(95)}),c(),b({width:p(99)}),h()),x(r.space.s6),_())),G(e.toastItems,{placement:X.center,maxItems:1,duration:1500}))}function ct(){return Z(at)}const at={sourceDir:"/source/Demos/ToDo",sections:[{title:"ToDo",componentFn:()=>nt(),sources:["View/ToDo.ts","View/ItemPanel.ts","Model/ToDoModel.ts","Data/ToDoData.ts"],markdown:"ToDo.md"}]};export{ct as ToDoDemo,ct as default};
