var g=Object.defineProperty;var f=(t,e,s)=>e in t?g(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var o=(t,e,s)=>(f(t,typeof e!="symbol"?e+"":e,s),s);import{a,c5 as w,c6 as M,c as d,f as b,aH as A,e as T,V as F,bz as D,H as R,l as E,D as v,h as S,aw as U,bi as x,aF as y,c7 as N,bx as u,c8 as P,G as C}from"./index-BldBqEEL.js";import{d as l}from"./FormFieldValidators-CJk185Fg.js";class k{constructor(e,s,r){o(this,"editor");o(this,"currentView",a("table"));o(this,"validationOn",a(!1));o(this,"editedRecord");this.recordClass=e,this.store=s,this.tableModel=r,this.editedRecord=a(new e(this.store)),this.editor=w(this.editedRecord.get())}get selectedRecord(){return this.tableModel.selectedRow.get()}newRecord(){this.editRecord(new this.recordClass(this.store),!1)}editSelectedRecord(){const e=this.selectedRecord;e&&this.editRecord(e,!0)}editRecord(e,s){this.editedRecord.set(e),M(this.editor,e),this.validationOn.set(s),this.currentView.set("form")}deleteRecord(){const e=this.selectedRecord;e&&(this.tableModel.delete(e),this.store.delete(e))}hasSelection(){return!!this.selectedRecord}selectionIsPersisted(){var e;return!!((e=this.selectedRecord)!=null&&e.isPersisted())}editedRecordIsPersisted(){var e;return!!((e=this.editedRecord.get())!=null&&e.isPersisted())}setMode(e){this.currentView.set(e)}cancelEdit(){this.setMode("table")}submitRecord(){const e=this.editedRecord.get();e&&(this.selectionIsPersisted()?(e.update(),this.tableModel.updateRowWithRecord(e)):(e.create(),this.tableModel.addRowAtEnd(e)),this.setMode("table"))}}function B(t,e){const r={templateColumns:`repeat(${Math.max(...Object.values(e).map(i=>(i==null?void 0:i.gridArea.c2)||2))-1}, 1fr)`,gap:d.space.s3,resetLabel:a(()=>t.selectionIsPersisted()?"":"Clear"),submitLabel:a(()=>t.editedRecordIsPersisted()?"Update":"Create"),cancelAction:()=>t.cancelEdit(),submitAction:()=>t.submitRecord(),validationOn:t.validationOn,width:b(90)};return A(t.editedRecord,t.editor,e,r)}function I(t){function e(c,h,m){return S({label:c,controlSize:"sm",rounding:d.rounding.pill,action:h,disabled:m})}const s=a(!0);function r(){return U(s,"Are you sure?",()=>t.deleteRecord(),{acceptLabel:"Yes",rejectLabel:"No"})}function i(){return R({width:b(100)}).append(E("Users",{font:d.font.title_large}),v(1),R({gap:d.space.s3}).append(e("Add",()=>t.newRecord()),e("Edit",()=>t.editSelectedRecord(),a(()=>!t.hasSelection())),e("Delete",()=>s.set(!1),a(()=>!t.hasSelection())).append(r())))}const n={model:t,justifyContent:"start",gap:d.space.s3,minHeight:T(15),name:"TFTable"};return F(n).append(i(),D(t.tableModel,{width:b(100),border:d.border.thin,doubleClickAction:()=>t.editSelectedRecord()}))}function L(t,e,s,r){const i=new k(t,e,s);return x(i.currentView,n=>n==="table"?I(i):B(i,r))}class p extends y{constructor(s,r="",i="",n="",c="",h="",m=""){super(s);o(this,"recordID",-1);this.title=r,this.firstName=i,this.lastName=n,this.email=c,this.password=h,this.role=m}get name(){return[this.title,this.firstName,this.lastName].filter(s=>s).join(" ")}}function O(){return{title:{label:"Title",type:"select",choices:["","Mr","Mrs","Miss","Ms"],gridArea:{r1:1,c1:1,r2:2,c2:2},validators:[l.notBlank]},lastName:{label:"Last Name",type:"string",gridArea:{r1:1,c1:2,r2:2,c2:5},validators:[l.length(1,20),l.lettersOnly]},firstName:{label:"First Name",type:"string",gridArea:{r1:1,c1:5,r2:2,c2:8},validators:[l.notBlank]},email:{label:"Email",type:"email",gridArea:{r1:2,c1:1,r2:3,c2:5},validators:[l.email]},role:{label:"Role",type:"select",choices:["","Admin","User"],gridArea:{r1:2,c1:5,r2:3,c2:8},validators:[l.notBlank]},password:{label:"Password",type:"password",gridArea:{r1:3,c1:1,r2:4,c2:4},validators:[l.length(6)]}}}class V{constructor(){o(this,"store",new N("demo_user",p));o(this,"columns",[u({title:"Name",value:e=>e.name,alignment:"left"}),u({title:"Email",value:e=>e.email,alignment:"left"}),u({title:"Role",value:e=>e.role,alignment:"left"})]);o(this,"userTableModel");this.addInitialRecord(),this.userTableModel=new P(this.allUsers,this.columns)}get allUsers(){return this.store.getAllRecords()}addInitialRecord(){const e=this.store.createRecordList();e.addAction(s=>{if(s.length===0){const r=new p(this.store,"Mr","John","Smith","john@smith.com","123456","Admin");this.store.create(r)}}),this.store.getAll(e)}}function j(){const t=new V;return L(p,t.store,t.userTableModel,O())}function _(){return C(G)}const G={sourceDir:"/source/Demos/Panels",sections:[{title:"Table Form Ensemble",componentFn:j,sources:["TFEnsembleExample.ts","DemoUserRecord.ts","DemoUserFields.ts","DemoUserModel.ts"],markdown:"TFEnsembleExample.md"}]};export{_ as PendulumWavesDemo,_ as default};
