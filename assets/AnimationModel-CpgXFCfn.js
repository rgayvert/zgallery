var n=Object.defineProperty;var r=(a,t,s)=>t in a?n(a,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[t]=s;var i=(a,t,s)=>(r(a,typeof t!="symbol"?t+"":t,s),s);import{a as h,t as o}from"./index-DsAonCrY.js";class u{constructor(t={}){i(this,"startTimestamp",0);i(this,"previousTimestamp",0);i(this,"elapsed",0);i(this,"duration");i(this,"items",new Set([]));i(this,"state",h("stopped"));i(this,"running",o(!1,{action:t=>t?this.start():this.stop()}));this.duration=t.duration||Number.MAX_VALUE}setItems(t){this.items=new Set([...t])}add(...t){t.forEach(s=>this.items.add(s))}remove(t){this.items.delete(t)}requestFrame(){this.isRunning&&window.requestAnimationFrame(t=>this.step(t))}get isRunning(){return this.state.get()==="running"}start(){this.state.get()!=="running"&&(this.state.set("running"),this.running.set(!0),this.items.forEach(t=>{var s;return(s=t.begin)==null?void 0:s.call(t)}),this.requestFrame())}stop(){this.state.set("stopped"),this.running.set(!1),this.startTimestamp=0,this.items.forEach(t=>{var s;return(s=t.end)==null?void 0:s.call(t)})}pause(){this.state.set("paused"),this.startTimestamp=0}resume(){this.start()}step(t){if(!this.isRunning)return;this.startTimestamp===0&&(this.startTimestamp=t,this.previousTimestamp=t),this.elapsed=t-this.startTimestamp;const s=t-this.previousTimestamp;s!==0&&(this.items.forEach(e=>e.step(s,this.elapsed)),this.elapsed>=this.duration&&this.stop()),this.previousTimestamp=t,this.requestFrame()}}class d{constructor(t={}){i(this,"animator");i(this,"running");this.options=t,this.animator=this.basicAnimator(),this.running=this.animator.running}basicAnimator(){return new u(this.options)}get isRunning(){return this.animator.isRunning}start(){this.animator.start()}pause(){this.animator.pause()}stop(){this.animator.stop()}startOrStop(){this.isRunning?this.stop():this.start()}add(...t){this.animator.add(...t)}setItems(t){this.animator.setItems(t)}}export{d as A,u as B};
